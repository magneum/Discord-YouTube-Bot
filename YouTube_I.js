// ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
console.clear();
require('dotenv').config()
YouTubeTok = process.env.YouTubeTok;
const Discord = require("discord.js");
const Êá´á´œá´›á´œÊ™á´‡á´á´œêœ±Éªá´„ = new Discord.Client();
const { Client } = require("youtubei");
const { createWriteStream } = require("fs");
const YouTube_Feed = require("discord-ytdl-core");
// ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
const YouTubeIC = new Client();
Êá´á´œá´›á´œÊ™á´‡á´á´œêœ±Éªá´„.on("ready",
    () => {
        Êá´á´œá´›á´œÊ™á´‡á´á´œêœ±Éªá´„.user.setActivity(`ğŸ”Š /yt`, { type: 'LISTENING' });
        console.log(`
========================[ ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—² ]========================
|â­•ï¸â€¢â€¢  Bot_Status : ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—° ğš’ğšœ ğ™¾ğš—ğš•ğš’ğš—ğš ! 
|â­•ï¸â€¢â€¢  Check Discord for: ğŸ”Š /yt
========================[ ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—² ]========================`
        );
    });
// ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
Êá´á´œá´›á´œÊ™á´‡á´á´œêœ±Éªá´„.on("message",
    async message => {
        if (message.author.bot) return;
        if (message.content.startsWith("/yt")) {
            // ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
            let args = message.content.split(' ').slice(1);
            if (!args[0]) return message.channel.send(
                // ${message.author},
                `
Please enter YouTube **ğ˜œğ˜™ğ˜“** or **ğ˜•ğ˜¢ğ˜®ğ˜¦** of the song!

**Example:** /yt URL or /yt Song_Name`);
            // ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
            let infos;
            let stream;
            // ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
            try {
                stream = YouTube_Feed(args.join(" "),
                    { encoderArgs: ['-af', 'dynaudnorm=f=200'], fmt: 'mp3', opusEncoded: false });
                infos = await YouTubeIC.search(args.join(" "));
                // ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
            } catch (exiled) {
                message.channel.send(
                    // ${message.author},
                    `
Sorry! I could not find anything for: ${args.join(" ")} !`);
                return
            }
            try {
                message.channel.send(
                    // ${message.author},
                    `
ğ˜ğ˜¢ğ˜ªğ˜µ ğ˜›ğ˜ªğ˜­ğ˜­ ğ˜µğ˜©ğ˜¦ ğ˜¥ğ˜°ğ˜¸ğ˜¯ğ˜­ğ˜°ğ˜¢ğ˜¥ ğ˜ªğ˜´ ğ˜§ğ˜ªğ˜¯ğ˜ªğ˜´ğ˜©ğ˜¦ğ˜¥...
${infos[0].title}`);
                // ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
                stream.pipe(createWriteStream(__dirname + `/downloads/${infos[0].title}.mp3`)).on('finish', () => {
                    try {
                        message.channel.send(// ${message.author},
                            ` music : ${infos[0].title} in mp3.`,
                            new Discord.MessageAttachment(__dirname + `/downloads/${infos[0].title}.mp3`,
                                `${infos[0].title}.mp3`))
                        // ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
                    } catch (exiled) {
                        return message.channel.send(
                            // ${message.author},
                            `
Sorry! I didn't manage to send the desired music
á´á´€ÊÊ™á´‡ Éªá´›'êœ± á´›á´á´ Êœá´‡á´€á´ Ê êœ°á´Ê€ á´…Éªêœ±á´„á´Ê€á´…? 
á´Ê€ 
á´á´€ÊÊ™á´‡ Éª á´…á´É´'á´› Êœá´€á´ á´‡ á´›Êœá´‡ Ê€á´‡Qá´œÉªÊ€á´‡á´… á´˜á´‡Ê€á´Éªêœ±êœ±Éªá´É´êœ± á´›á´ á´œá´˜ÊŸá´á´€á´… á´›ÊœÉªêœ± á´›Êá´˜á´‡ á´êœ° êœ°ÉªÊŸá´‡ á´É´ á´›ÊœÉªêœ± êœ±á´‡Ê€á´ á´‡Ê€...`);
                    }
                })
                // ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================
            } catch (exiled) {
                return message.channel.send(
                    // ${message.author},
                    `
Sorry! I could not find anything for:
${args.join(" ")}

Maybe it is not possible to fetch the file from web`);
            }
        }
    });
Êá´á´œá´›á´œÊ™á´‡á´á´œêœ±Éªá´„.login(YouTubeTok);
// ===========================================[ â­•ï¸ğ—¬ğ—¼ğ˜‚ğ—§ğ˜‚ğ—¯ğ—²-ğ— ğ˜‚ğ˜€ğ—¶ğ—°â­•ï¸ ]==================================================